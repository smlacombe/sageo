{#

   Copyright (C) 2013 Savoir-Faire Linux Inc.

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#}
{% extends "main.html" %}
{% import 'lib/lib.html' as lib %}
{% block title %}{{ _('Sageo')+_('Edit view') }}{% endblock %}

{% block head %}
    {{ super() }}
    <script src="{{ url_for('.static', filename='js/tabs.js') }}"></script>
    <script src="{{ url_for('.static', filename='js/accordion.js') }}"></script>
{% endblock %}

{% block main_section %}
    <p>View edit</p>
    view_name = {{ view_name }}
    acknowledged = {{acknowledged}}
    <div class="container">
        <form class="form-horizontal" name="edit_view" action="edit_view" method="post" enctype="multipart/form-data">
            <h2>{{ _("Edit view") }}</h2>
                {{ form.hidden_tag() }}
            <div id="accordion">
                <div>
                    <h3><a href="#">{{ _('Basic Settings') }}</a></h3>
                    <div> 
                        {{ lib.with_errors(form.basic_settings.title) }} 
                        {{ lib.with_errors(form.basic_settings.link_name) }}
                        {{ lib.with_errors(form.basic_settings.datasource) }}
                        {{ lib.with_errors(form.basic_settings.buttontext, fieldargs={'placeholder': _('buttontext')}) }}
                        {{ lib.with_errors(form.basic_settings.reload_intervall) }}
                    </div>
                </div>
                <div>
                    <h3><a href="#">{{ _('Filters') }}</a></h3>
                    <div>
                        {{ lib.control_group() }}
                            <span class="control-label">{{ _('Hostname') }}</span>
                            {{ lib.controls(inline=True) }}
                                {{ lib.print_field(form.filters.hostname.options) }}
                                {{ lib.print_field(form.filters.hostname.hostname, fieldargs={'placeholder': _('Hostname expression')}) }}

                                <label class=checkbox>
                                    {{ lib.print_field(form.filters.hostname.exact_match) }} {{ _('Exact match') }}
                                </label>
                            </div>
                        </div>

                        {{ lib.control_group() }}
                            <span class="control-label">{{ _('Host states') }}</span>
                            {{ lib.controls(inline=True) }}
                                {{ lib.print_field(form.filters.hoststates.options) }}
                                <label class=checkbox>
                                    {{ lib.print_field(form.filters.hoststates.up) }} {{ _('UP') }}
                                </label>
                                <label class=checkbox>
                                    {{ lib.print_field(form.filters.hoststates.down) }} {{ _('DOWN') }}
                                </label>
                                <label class=checkbox>
                                    {{ lib.print_field(form.filters.hoststates.unreach) }} {{ _('UNREACH') }}
                                </label>
                                <label class=checkbox>
                                    {{ lib.print_field(form.filters.hoststates.pending) }} {{ _('PENDING') }}
                                </label>
                            </div>
                        </div>


                        {{ lib.control_group() }}
                            <span class="control-label">{{ _('Is summary host') }}</span>
                            {{ lib.controls(inline=True) }}
                                {{ lib.print_field(form.filters.summaryhost.options) }}
                                {{ lib.print_radiofield(form.filters.summaryhost.summary) }}
                            </div>
                        </div>

                    </div>
                </div>
                <div>
                    <h3><a href="#">{{ _('Sorting') }}</a></h3>
                </div>
                <div>
                <h3><a href="#">{{ _('Grouping') }}</a></h3>
                </div>
                <div>
                    <h3><a href="#">{{ _('Columns') }}</a></h3>
                    <div>
                        {% set counter=0 %}
                        {% for subfield in form.columns %}
                                {% set counter = counter + 1 %}
                                {{ lib.control_group() }}
                                <span class="control-label">{{ _('Column #')+ ' ' ~counter }}</span>
                                {{ lib.controls() }}
                                    {{ lib.print_field(subfield.column) }}
                                </div>
                            </div>
                        {% endfor %}
                        <a id="add_column" class="btn" href="#">{{ _('Add column') }}</a>
                    </div>
                </div>
                <div>
                    <h3><a href="#">{{ _('Layout') }}</a></h3>
                    <div>
                        {{ lib.with_errors(form.layout.number_columns) }}
                    </div>
                </div>
            </div>

            <button type=submit class="btn btn-primary">{{ _('Save') }}</button>
        </form>
    </div>
{% endblock %}
